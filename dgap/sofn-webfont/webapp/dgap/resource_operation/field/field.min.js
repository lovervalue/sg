webpackJsonp([0],{337:function(e,exports,t){e.exports=t(338)},338:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(145),o=a(s),u=t(161),r=a(u),c=t(392),d=a(c),E=t(267),h=a(E),f=t(33),p=a(f),R=t(101),m=a(R),v=t(183),S=a(v),_=t(88),N=a(_),g=t(123),T=a(g),O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},y=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();t(184),t(185),t(526),t(284),t(186),t(124),t(104),t(105),t(125);var P=t(1),b=a(P),D=t(187),C=a(D),I=t(106),A=t(215),M=a(A),L=t(216),k=t(222),F=a(k),x=m.default.Option,V=function(e){e="string"==typeof e?e:"操作成功",T.default.success(e,1)},w=function(e){e="string"==typeof e?e:"操作失败",T.default.error(e)},G=function(e){function t(e){n(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={status:"",breads:[{name:"数据共享系统",link:"/#/index/content/dgap/resource/resourceDir"},{name:"资源目录管理",link:"/#/index/content/dgap/resource/resourceMa"},{name:"表设计"}],fieldModal:{visible:!1,isEdit:!1},tableModal:{visible:!1,nextButton:{loading:!1,disabled:!1}},createButton:{loading:!1,disabled:!0},deleteButton:{loading:!1,disabled:!0},tableForm:{chineseName:{type:"input",value:""},englishName:{type:"input",value:""}},fieldForm:{chineseName:{type:"input"},englishName:{type:"input"},type:{type:"select",options:[]},len:{type:"inputNumber",value:1}},fieldsTable:{dataSource:[],columns:[{title:"英文字段名",dataIndex:"englishName"},{title:"中文字段名",dataIndex:"chineseName"},{title:"字段类型",dataIndex:"typeName"},{title:"字段长度",dataIndex:"len"},{title:"状态",dataIndex:"statusText"},{title:"操作",dataIndex:"ACTION",render:function(e,t,n){return b.default.createElement("div",null,b.default.createElement("a",{href:"#",style:{marginRight:10},disabled:"NE"!=t.status.toUpperCase(),onClick:a.editFields(t)},b.default.createElement(p.default,{type:"edit"}),"修改"),b.default.createElement("a",{href:"#",style:{marginRight:10},disabled:"NE"!=t.status.toUpperCase(),onClick:a.deleteFields(t.id)},b.default.createElement(p.default,{type:"delete"}),"删除"))}}]}},a}return l(t,e),y(t,[{key:"toggleModal",value:function(e,t){var a=this;return function(){var n=Object.assign({},a.state);n[e].visible=t,a.setState(Object.assign({},a.state,n),function(){})}}},{key:"updateState",value:function(e){var t=this,a=e?e.split("."):[];return function(e){for(var n=Object.assign({},t.state),i=n,l=0,s=a.length;l<s;l++)i=i[a[l]];Object.assign(i,e),t.setState(Object.assign({},t.state,n))}}},{key:"onChange",value:function(e){var t=this,a=e.split(".");return function(e){for(var n=O({},t.state),i=n,l=0,s=a.length;l<s;l++)i=i[a[l]];switch(i.type){case"input":case"textarea":i.value=e.target.value;break;default:i.value=e}t.setState(n,function(){})}}},{key:"fetchFields",value:function(){var e=this,t=this.state.resourceId;I.Api.getFieldList({resourceId:t,start:0,length:100}).then(function(t){t=t||[],e.updateState("fieldsTable")({dataSource:t})})}},{key:"editFields",value:function(e){var t=this;return function(a){var n=t.state,i=n.fieldModal,l=n.fieldForm,s=e.chineseName,o=e.englishName,u=e.type,r=e.len,c=e.id;i.isEdit=!0,l.chineseName.value=s,l.englishName.value=o,l.type.value=u,l.len.value=r,l.recordId=c,t.setState({fieldModal:i,fieldForm:l}),t.toggleModal("fieldModal",!0)()}}},{key:"updateFields",value:function(){var e=this,t=this.state,a=t.fieldForm,n=t.fieldForm.recordId,i={chineseName:a.chineseName.value,englishName:a.englishName.value.toUpperCase(),type:a.type.value,id:n};~["varchar","integer","float"].indexOf(a.type.value)&&Object.assign(i,{len:a.len.value}),this.updateState("fieldModal")({confirmLoading:!0}),I.Api.updateFields(i).then(function(t){e.updateState("fieldModal")({confirmLoading:!1,visible:!1}),V(),e.fetchFields()},function(t){e.updateState("fieldModal")({confirmLoading:!1})})}},{key:"deleteFields",value:function(e){var t=this,a=this.state.resourceId;return function(n){I.Api.deleteFields({id:e,resourceId:a}).then(function(e){V(),t.fetchFields()})}}},{key:"onOpenFieldModal",value:function(){var e=this.state,t=e.fieldModal,a=e.fieldForm;t.visible=!0,t.isEdit=!1,a.chineseName.value="",a.englishName.value="",a.type.value=a.type.options.length?a.type.options[0].type:"",a.len.value=1,this.setState({fieldModal:t,fieldForm:a})}},{key:"addFields",value:function(){var e=this,t=this.state,a=t.resourceId,n=t.fieldForm,i={chineseName:n.chineseName.value,englishName:n.englishName.value.toUpperCase(),type:n.type.value,resourceId:a};~["varchar","integer","float"].indexOf(n.type.value)&&Object.assign(i,{len:n.len.value}),this.updateState("fieldModal")({confirmLoading:!0}),I.Api.addFields(i).then(function(t){e.updateState("fieldModal")({confirmLoading:!1,visible:!1}),V(),e.fetchFields()},function(t){e.updateState("fieldModal")({confirmLoading:!1})})}},{key:"submitFields",value:function(){this.validFieldForm()&&(this.state.fieldModal.isEdit?this.updateFields():this.addFields())}},{key:"getTableInfo",value:function(){var e=this,t=this.state.resourceId;I.Api.getTableInfo({resourceId:t}).then(function(t){var a=e.state,n=a.tableModal,i=a.tableForm,l=a.deleteButton,s=a.createButton;if(null==t)return n.visible=!0,n.nextButton={disabled:!1,loading:!1},l.disabled=!0,void e.setState({tableModal:n,deleteButton:l});var o=t.status;i.chineseName.value=t.chineseName,i.englishName.value=t.englishName,n.visible="AE"!=o.toUpperCase(),n.nextButton={disabled:!1,loading:!1},s.disabled="ae"==t.status.toLowerCase(),l.disabled="ae"!=t.status.toLowerCase(),e.setState({status:o,tableForm:i,tableModal:n,createButton:s,deleteButton:l})})}},{key:"fieldType",value:function(){var e=this;I.Api.fieldType({}).then(function(t){e.updateState("fieldForm.type.options")(t)})}},{key:"addTable",value:function(){var e=this;if(this.validTableForm()){var t=this.state,a=t.tableForm,n=a.chineseName,i=a.englishName,l=t.resourceId,s={chineseName:n.value,englishName:i.value.toUpperCase(),resourceId:l};this.updateState("tableModal.nextButton")({loading:!0}),I.Api.addTable(s).then(function(){V(),e.updateState("tableModal")({visible:!1}),e.updateState("tableModal.nextButton")({loading:!1,disabled:!1})}).catch(function(){e.updateState("tableModal.nextButton")({loading:!1,disabled:!1})})}}},{key:"createTable",value:function(){var e=this,t=this.state.resourceId;this.updateState("createButton")({loading:!0}),I.Api.createTable({resourceId:t}).then(function(){V(),e.getTableInfo(),e.fetchFields(),e.updateState("createButton")({loading:!1})}).catch(function(){e.updateState("createButton")({loading:!1})})}},{key:"deleteTable",value:function(){var e=this,t=this.state.resourceId;this.updateState("deleteButton")({loading:!0}),I.Api.deleteTable({resourceId:t}).then(function(){V(),e.getTableInfo(),e.fetchFields(),e.updateState("deleteButton")({loading:!1})}).catch(function(){e.updateState("deleteButton")({loading:!1})})}},{key:"validTableForm",value:function(){var e=this.state.tableForm,t=e.chineseName,a=e.englishName;return null!=a.value&&/^[a-z][a-z0-9_]{0,19}$/i.test(a.value)?!(null==t.value||!/^[\u4E00-\u9FA5\uF900-\uFA2D][\u4E00-\u9FA5\uF900-\uFA2D_0-9-]{0,19}$/i.test(t.value))||void w("[中文字段名] 中文、数字、下划线，并以中文开头，最多20位。"):void w("[英文字段名] 英文字母、数字、下划线，并以英文字母开头，最多20位。")}},{key:"validFieldForm",value:function(){var e=this.state.fieldForm,t=e.chineseName,a=e.englishName,n=e.type,i=e.len;return null!=a.value&&/^[a-z][a-z0-9_]{0,19}$/i.test(a.value)?null!=t.value&&/^[\u4E00-\u9FA5\uF900-\uFA2D][\u4E00-\u9FA5\uF900-\uFA2D_0-9-]*$/i.test(t.value)?"varchar"==n.value&&(""==i.value||i.value<1||i.value>=1e3)?void w("字段长度 >= 1 且 字段长度 < 1000"):"integer"==n.value&&(!/^\d{1,2}$/i.test(i.value)||i.value<=0||i.value>=38)?void w("字段长度 >= 1 且 字段长度 < 38"):"float"!=n.value||!(!/^\d{1,2}$/i.test(i.value)||i.value<=0||i.value>=38)||void w("字段长度 >= 1 且 字段长度 < 38"):void w("[中文字段名] 中文、数字、下划线，并以中文开头，最多20位。"):void w("[英文字段名] 英文字母、数字、下划线，并以英文字母开头，最多20位。")}},{key:"componentWillMount",value:function(){var e=M.default.parseUri("id");e=e.length?e:w("资源id不能为空"),this.setState({resourceId:e})}},{key:"componentDidMount",value:function(){this.getTableInfo(),this.fieldType(),this.fetchFields()}},{key:"onChangeVisible",value:function(e){}},{key:"back",value:function(){window.location.href="/#/index/content/dgap/resource/resourceMa"}},{key:"render",value:function(){var e=this.state,t=e.breads,a=e.fieldModal,n=e.tableModal,i=e.fieldsTable,l=e.fieldForm,s=e.tableForm,u=e.createButton,c=e.deleteButton;e.status;return b.default.createElement("div",null,b.default.createElement(o.default,null,b.default.createElement(r.default,{span:24},b.default.createElement(F.default,null))),b.default.createElement(o.default,{justify:"center"},b.default.createElement(r.default,{span:4},b.default.createElement(L.SgMenu,null)),b.default.createElement(r.default,{span:20,style:{borderLeft:"1px solid #e9e9e9",backgroundColor:"#FFF",borderRadius:5}},b.default.createElement("div",{style:{marginBottom:16,marginTop:12}},b.default.createElement(o.default,{type:"flex",justify:"center",align:"middle"},b.default.createElement(r.default,{span:23},b.default.createElement(L.SgBreadcrumb,{breads:t})))),b.default.createElement("div",{style:{marginBottom:16}},b.default.createElement(o.default,{type:"flex",justify:"center",align:"middle"},b.default.createElement(r.default,{span:15},b.default.createElement(N.default,{type:"primary",icon:"plus",onClick:this.onOpenFieldModal.bind(this)},"新增字段"),b.default.createElement(N.default,{type:"primary",style:{marginLeft:10},onClick:this.back.bind(this)},"返回")),b.default.createElement(r.default,{span:8,style:{textAlign:"right"}},b.default.createElement(N.default,O({type:"primary",icon:"rocket",onClick:this.createTable.bind(this)},u,{disabled:!i.dataSource.length||i.dataSource.filter(function(e){return"NE"==e.status}).length<=0,style:{marginRight:10}}),"生成表"),b.default.createElement(N.default,O({type:"primary",icon:"delete",onClick:this.deleteTable.bind(this)},c),"删除表")))),b.default.createElement(o.default,{type:"flex",justify:"center"},b.default.createElement(r.default,{span:23,style:{marginBottom:20}},b.default.createElement(L.SgTable,O({size:"middle",pagination:!1,bordered:!0,rowKey:function(e,t){return e.englishName},title:function(){return s.englishName.value+" "+s.chineseName.value}},i)))))),b.default.createElement(L.SgModal,O({title:"表名设计",updateState:this.updateState("tableModal"),maskClosable:!1,closable:!1,footer:[b.default.createElement(N.default,O({key:"submit",type:"primary",size:"large"},n.nextButton,{onClick:this.addTable.bind(this)}),"下一步",b.default.createElement(p.default,{type:"right"}))]},n),b.default.createElement("div",null,b.default.createElement(o.default,{style:{marginBottom:10},type:"flex",justify:"center",align:"middle"},b.default.createElement(r.default,{span:4},b.default.createElement("span",null,"英文表名")),b.default.createElement(r.default,{span:16},b.default.createElement(S.default,{placeholder:"英文表名",value:s.englishName.value,onChange:this.onChange("tableForm.englishName")})),b.default.createElement(r.default,{span:1,style:{textAlign:"center"}},b.default.createElement(h.default,{title:"英文字母、数字、下划线，并以英文字母开头。"},b.default.createElement(p.default,{type:"info-circle-o"})))),b.default.createElement(o.default,{style:{marginBottom:10},type:"flex",justify:"center",align:"middle"},b.default.createElement(r.default,{span:4},b.default.createElement("span",null,"中文表名")),b.default.createElement(r.default,{span:16},b.default.createElement(S.default,{placeholder:"中文表名",value:s.chineseName.value,onChange:this.onChange("tableForm.chineseName")})),b.default.createElement(r.default,{span:1,style:{textAlign:"center"}},b.default.createElement(h.default,{title:"中文、英文字母、数字、下划线，并以中文开头。"},b.default.createElement(p.default,{type:"info-circle-o"})))))),b.default.createElement(L.SgModal,O({title:"字段设计",onOk:this.submitFields.bind(this),updateState:this.updateState("fieldModal")},a),b.default.createElement("div",null,b.default.createElement(o.default,{style:{marginBottom:10},type:"flex",justify:"center",align:"middle"},b.default.createElement(r.default,{span:4},b.default.createElement("span",null,"英文字段名")),b.default.createElement(r.default,{span:16},b.default.createElement(S.default,{placeholder:"英文字段名",value:l.englishName.value,onChange:this.onChange("fieldForm.englishName")})),b.default.createElement(r.default,{span:1,style:{textAlign:"center"}},b.default.createElement(h.default,{title:"英文字母、数字、下划线，并以英文字母开头。"},b.default.createElement(p.default,{type:"info-circle-o"})))),b.default.createElement(o.default,{style:{marginBottom:10},type:"flex",justify:"center",align:"middle"},b.default.createElement(r.default,{span:4},b.default.createElement("span",null,"中文字段名")),b.default.createElement(r.default,{span:16},b.default.createElement(S.default,{placeholder:"中文字段名",value:l.chineseName.value,onChange:this.onChange("fieldForm.chineseName")})),b.default.createElement(r.default,{span:1,style:{textAlign:"center"}},b.default.createElement(h.default,{title:"中文、数字、下划线，并以中文开头。"},b.default.createElement(p.default,{type:"info-circle-o"})))),b.default.createElement(o.default,{style:{marginBottom:10},type:"flex",justify:"center",align:"middle"},b.default.createElement(r.default,{span:4},b.default.createElement("span",null,"字段类型")),b.default.createElement(r.default,{span:16},b.default.createElement(m.default,{size:"large",style:{width:"100%"},defaultValue:l.type.value,value:l.type.value,onChange:this.onChange.call(this,"fieldForm.type")},l.type.options.map(function(e,t){return b.default.createElement(x,{value:e.type,key:t},e.name)}))),b.default.createElement(r.default,{span:1,style:{textAlign:"center"}},b.default.createElement(h.default,{overlay:function(){return b.default.createElement("div",null,l.type.options.map(function(e,t){return e.description&&e.description.length?b.default.createElement("p",{key:t},e.name+" : "+e.description+";"):null}))}},b.default.createElement(p.default,{type:"info-circle-o"})))),b.default.createElement("div",{style:{display:~["varchar","integer","float"].indexOf(l.type.value)?"block":"none"}},b.default.createElement(o.default,{style:{marginBottom:10},type:"flex",justify:"center",align:"middle"},b.default.createElement(r.default,{span:4},b.default.createElement("span",null,"字段长度")),b.default.createElement(r.default,{span:16},b.default.createElement(d.default,{min:1,max:255,defaultValue:8,step:1,value:l.len.value,onChange:this.onChange.call(this,"fieldForm.len")})),b.default.createElement(r.default,{span:1}))))))}}]),t}(P.Component);exports.default=G,C.default.value("PageView",G)},392:function(e,exports,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=t(3),i=a(n),l=t(12),s=a(l),o=t(2),u=a(o),r=t(6),c=a(r),d=t(4),E=a(d),h=t(5),f=a(h),p=t(1),R=a(p),m=t(9),v=a(m),S=t(393),_=a(S),N=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&(a[n[i]]=e[n[i]]);return a},g=function(e){function t(){return(0,u.default)(this,t),(0,E.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e,t=this.props,a=t.className,n=t.size,l=N(t,["className","size"]),o=(0,v.default)((e={},(0,s.default)(e,this.props.prefixCls+"-lg","large"===n),(0,s.default)(e,this.props.prefixCls+"-sm","small"===n),e),a);return R.default.createElement(_.default,(0,i.default)({className:o},l))}}]),t}(R.default.Component);exports.default=g,g.defaultProps={prefixCls:"ant-input-number",step:1},e.exports=exports.default},393:function(e,t,a){"use strict";function n(){}function i(e){e.preventDefault()}Object.defineProperty(t,"__esModule",{value:!0});var l=a(12),s=a.n(l),o=a(3),u=a.n(o),r=a(1),c=a.n(r),d=a(7),E=a.n(d),h=a(42),f=a.n(h),p=a(9),R=a.n(p),m=a(394),v=a(395),S=f()({displayName:"InputNumber",propTypes:{focusOnUpDown:E.a.bool,onChange:E.a.func,onKeyDown:E.a.func,onKeyUp:E.a.func,prefixCls:E.a.string,tabIndex:E.a.string,disabled:E.a.bool,onFocus:E.a.func,onBlur:E.a.func,readOnly:E.a.bool,max:E.a.number,min:E.a.number,step:E.a.oneOfType([E.a.number,E.a.string]),upHandler:E.a.node,downHandler:E.a.node,useTouch:E.a.bool,formatter:E.a.func,parser:E.a.func,onMouseEnter:E.a.func,onMouseLeave:E.a.func,onMouseOver:E.a.func,onMouseOut:E.a.func,precision:E.a.number},mixins:[m.a],getDefaultProps:function(){return{focusOnUpDown:!0,useTouch:!1,prefixCls:"rc-input-number"}},componentDidMount:function(){this.componentDidUpdate()},componentWillUpdate:function(){try{this.start=this.refs.input.selectionStart,this.end=this.refs.input.selectionEnd}catch(e){}},componentDidUpdate:function(){if(this.props.focusOnUpDown&&this.state.focused){var e=this.refs.input.setSelectionRange;e&&"function"==typeof e&&void 0!==this.start&&void 0!==this.end&&this.start!==this.end?this.refs.input.setSelectionRange(this.start,this.end):this.focus()}},onKeyDown:function(e){if(38===e.keyCode){var t=this.getRatio(e);this.up(e,t),this.stop()}else if(40===e.keyCode){var a=this.getRatio(e);this.down(e,a),this.stop()}var n=this.props.onKeyDown;if(n){for(var i=arguments.length,l=Array(i>1?i-1:0),s=1;s<i;s++)l[s-1]=arguments[s];n.apply(void 0,[e].concat(l))}},onKeyUp:function(e){this.stop();var t=this.props.onKeyUp;if(t){for(var a=arguments.length,n=Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];t.apply(void 0,[e].concat(n))}},getRatio:function(e){var t=1;return e.metaKey||e.ctrlKey?t=.1:e.shiftKey&&(t=10),t},getValueFromEvent:function(e){return e.target.value},focus:function(){this.refs.input.focus()},formatWrapper:function(e){return this.props.formatter?this.props.formatter(e):e},render:function(){var e,t=u()({},this.props),a=t.prefixCls,l=t.disabled,o=t.readOnly,r=t.useTouch,d=R()((e={},s()(e,a,!0),s()(e,t.className,!!t.className),s()(e,a+"-disabled",l),s()(e,a+"-focused",this.state.focused),e)),E="",h="",f=this.state.value;if(f)if(isNaN(f))E=a+"-handler-up-disabled",h=a+"-handler-down-disabled";else{var p=Number(f);p>=t.max&&(E=a+"-handler-up-disabled"),p<=t.min&&(h=a+"-handler-down-disabled")}var m=!t.readOnly&&!t.disabled,S=void 0;void 0!==(S=this.state.focused?this.state.inputValue:this.toPrecisionAsStep(this.state.value))&&null!==S||(S="");var _=void 0,N=void 0;r?(_={onTouchStart:m&&!E?this.up:n,onTouchEnd:this.stop},N={onTouchStart:m&&!h?this.down:n,onTouchEnd:this.stop}):(_={onMouseDown:m&&!E?this.up:n,onMouseUp:this.stop,onMouseLeave:this.stop},N={onMouseDown:m&&!h?this.down:n,onMouseUp:this.stop,onMouseLeave:this.stop});var g=this.formatWrapper(S),T=!!E||l||o,O=!!h||l||o;return c.a.createElement("div",{className:d,style:t.style,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,onMouseOver:t.onMouseOver,onMouseOut:t.onMouseOut},c.a.createElement("div",{className:a+"-handler-wrap"},c.a.createElement(v.a,u()({ref:"up",disabled:T,prefixCls:a,unselectable:"unselectable"},_,{role:"button","aria-label":"Increase Value","aria-disabled":!!T,className:a+"-handler "+a+"-handler-up "+E}),this.props.upHandler||c.a.createElement("span",{unselectable:"unselectable",className:a+"-handler-up-inner",onClick:i})),c.a.createElement(v.a,u()({ref:"down",disabled:O,prefixCls:a,unselectable:"unselectable"},N,{role:"button","aria-label":"Decrease Value","aria-disabled":!!O,className:a+"-handler "+a+"-handler-down "+h}),this.props.downHandler||c.a.createElement("span",{unselectable:"unselectable",className:a+"-handler-down-inner",onClick:i}))),c.a.createElement("div",{className:a+"-input-wrap",role:"spinbutton","aria-valuemin":t.min,"aria-valuemax":t.max,"aria-valuenow":f},c.a.createElement("input",{type:t.type,placeholder:t.placeholder,onClick:t.onClick,className:a+"-input",tabIndex:t.tabIndex,autoComplete:"off",onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:m?this.onKeyDown:n,onKeyUp:m?this.onKeyUp:n,autoFocus:t.autoFocus,maxLength:t.maxLength,readOnly:t.readOnly,disabled:t.disabled,max:t.max,min:t.min,step:t.step,name:t.name,id:t.id,onChange:this.onChange,ref:"input",value:g})))}});t.default=S},394:function(e,t,a){"use strict";function n(){}function i(e){return e.replace(/[^\w\.-]+/g,"")}var l=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1;t.a={getDefaultProps:function(){return{max:l,min:-l,step:1,style:{},onChange:n,onKeyDown:n,onFocus:n,onBlur:n,parser:i}},getInitialState:function(){var e=void 0,t=this.props;return e="value"in t?t.value:t.defaultValue,e=this.toNumber(e),{inputValue:this.toPrecisionAsStep(e),value:e,focused:t.autoFocus}},componentWillReceiveProps:function(e){if("value"in e){var t=this.state.focused?e.value:this.getValidValue(e.value);this.setState({value:t,inputValue:this.inputting?t:this.toPrecisionAsStep(t)})}},componentWillUnmount:function(){this.stop()},onChange:function(e){this.state.focused&&(this.inputting=!0);var t=this.props.parser(this.getValueFromEvent(e).trim());this.setState({inputValue:t}),this.props.onChange(this.toNumberWhenUserInput(t))},onFocus:function(){var e;this.setState({focused:!0}),(e=this.props).onFocus.apply(e,arguments)},onBlur:function(e){for(var t=this,a=arguments.length,n=Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];this.inputting=!1,this.setState({focused:!1});var l=this.getCurrentValidValue(this.state.inputValue);e.persist(),this.setValue(l,function(){var a;(a=t.props).onBlur.apply(a,[e].concat(n))})},getCurrentValidValue:function(e){var t=e;return t=""===t?"":this.isNotCompleteNumber(t)?this.state.value:this.getValidValue(t),this.toNumber(t)},getValidValue:function(e){var t=parseFloat(e,10);return isNaN(t)?e:(t<this.props.min&&(t=this.props.min),t>this.props.max&&(t=this.props.max),t)},setValue:function(e,t){var a=this.isNotCompleteNumber(parseFloat(e,10))?void 0:parseFloat(e,10),n=a!==this.state.value||""+a!=""+this.state.inputValue;"value"in this.props?this.setState({inputValue:this.toPrecisionAsStep(this.state.value)},t):this.setState({value:a,inputValue:this.toPrecisionAsStep(e)},t),n&&this.props.onChange(a)},getPrecision:function(e){if("precision"in this.props)return this.props.precision;var t=e.toString();if(t.indexOf("e-")>=0)return parseInt(t.slice(t.indexOf("e-")+2),10);var a=0;return t.indexOf(".")>=0&&(a=t.length-t.indexOf(".")-1),a},getMaxPrecision:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if("precision"in this.props)return this.props.precision;var a=this.props.step,n=this.getPrecision(t),i=this.getPrecision(a),l=this.getPrecision(e);return e?Math.max(l,n+i):n+i},getPrecisionFactor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this.getMaxPrecision(e,t);return Math.pow(10,a)},toPrecisionAsStep:function(e){if(this.isNotCompleteNumber(e)||""===e)return e;var t=Math.abs(this.getMaxPrecision(e));return 0===t?e.toString():isNaN(t)?e.toString():Number(e).toFixed(t)},isNotCompleteNumber:function(e){return isNaN(e)||""===e||null===e||e&&e.toString().indexOf(".")===e.toString().length-1},toNumber:function(e){return this.isNotCompleteNumber(e)?e:"precision"in this.props?Number(Number(e).toFixed(this.props.precision)):Number(e)},toNumberWhenUserInput:function(e){return(/\.\d*0$/.test(e)||e.length>16)&&this.state.focused?e:this.toNumber(e)},upStep:function(e,t){var a=this.props,n=a.step,i=a.min,l=this.getPrecisionFactor(e,t),s=Math.abs(this.getMaxPrecision(e,t)),o=void 0;return o="number"==typeof e?((l*e+l*n*t)/l).toFixed(s):i===-1/0?n:i,this.toNumber(o)},downStep:function(e,t){var a=this.props,n=a.step,i=a.min,l=this.getPrecisionFactor(e,t),s=Math.abs(this.getMaxPrecision(e,t)),o=void 0;return o="number"==typeof e?((l*e-l*n*t)/l).toFixed(s):i===-1/0?-n:i,this.toNumber(o)},step:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t&&t.preventDefault();var n=this.props;if(!n.disabled){var i=this.getCurrentValidValue(this.state.inputValue)||0;if(!this.isNotCompleteNumber(i)){var l=this[e+"Step"](i,a);l>n.max?l=n.max:l<n.min&&(l=n.min),this.setValue(l),this.setState({focused:!0})}}},stop:function(){this.autoStepTimer&&clearTimeout(this.autoStepTimer)},down:function(e,t,a){var n=this;e.persist&&e.persist(),this.stop(),this.step("down",e,t),this.autoStepTimer=setTimeout(function(){n.down(e,t,!0)},a?200:600)},up:function(e,t,a){var n=this;e.persist&&e.persist(),this.stop(),this.step("up",e,t),this.autoStepTimer=setTimeout(function(){n.up(e,t,!0)},a?200:600)}}},395:function(e,t,a){"use strict";var n=a(64),i=a.n(n),l=a(2),s=a.n(l),o=a(6),u=a.n(o),r=a(4),c=a.n(r),d=a(5),E=a.n(d),h=a(1),f=a.n(h),p=a(7),R=a.n(p),m=a(396),v=function(e){function t(){return s()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,a=e.disabled,n=i()(e,["prefixCls","disabled"]);return f.a.createElement(m.a,{disabled:a,activeClassName:t+"-handler-active"},f.a.createElement("span",n))}}]),t}(h.Component);v.propTypes={prefixCls:R.a.string,disabled:R.a.bool},t.a=v},396:function(e,t,a){"use strict";function n(e){return Object.keys(e).forEach(function(t){return e[t]=t}),e}function i(e,t){var a={};return t.forEach(function(t){a[t]=e[t]}),a}function l(e){var t=e;t.nativeEvent&&(t=t.nativeEvent);var a=t.touches,n=t.changedTouches,i=a&&a.length>0,l=n&&n.length>0;return!i&&l?n[0]:i?a[0]:t}function s(){return Date.now()-C>=I}var o=a(3),u=a.n(o),r=a(2),c=a.n(r),d=a(6),E=a.n(d),h=a(4),f=a.n(h),p=a(5),R=a.n(p),m=a(1),v=a.n(m),S=a(18),_=a.n(S),N=a(473),g=n({NOT_RESPONDER:null,RESPONDER_INACTIVE_PRESS_IN:null,RESPONDER_INACTIVE_PRESS_OUT:null,RESPONDER_ACTIVE_PRESS_IN:null,RESPONDER_ACTIVE_PRESS_OUT:null,RESPONDER_ACTIVE_LONG_PRESS_IN:null,RESPONDER_ACTIVE_LONG_PRESS_OUT:null,ERROR:null}),T={RESPONDER_ACTIVE_PRESS_OUT:!0,RESPONDER_ACTIVE_PRESS_IN:!0},O={RESPONDER_INACTIVE_PRESS_IN:!0,RESPONDER_ACTIVE_PRESS_IN:!0,RESPONDER_ACTIVE_LONG_PRESS_IN:!0},y={RESPONDER_ACTIVE_LONG_PRESS_IN:!0},P=n({DELAY:null,RESPONDER_GRANT:null,RESPONDER_RELEASE:null,RESPONDER_TERMINATED:null,ENTER_PRESS_RECT:null,LEAVE_PRESS_RECT:null,LONG_PRESS_DETECTED:null}),b={NOT_RESPONDER:{DELAY:g.ERROR,RESPONDER_GRANT:g.RESPONDER_INACTIVE_PRESS_IN,RESPONDER_RELEASE:g.ERROR,RESPONDER_TERMINATED:g.ERROR,ENTER_PRESS_RECT:g.ERROR,LEAVE_PRESS_RECT:g.ERROR,LONG_PRESS_DETECTED:g.ERROR},RESPONDER_INACTIVE_PRESS_IN:{DELAY:g.RESPONDER_ACTIVE_PRESS_IN,RESPONDER_GRANT:g.ERROR,RESPONDER_RELEASE:g.NOT_RESPONDER,RESPONDER_TERMINATED:g.NOT_RESPONDER,ENTER_PRESS_RECT:g.RESPONDER_INACTIVE_PRESS_IN,LEAVE_PRESS_RECT:g.RESPONDER_INACTIVE_PRESS_OUT,LONG_PRESS_DETECTED:g.ERROR},RESPONDER_INACTIVE_PRESS_OUT:{DELAY:g.RESPONDER_ACTIVE_PRESS_OUT,RESPONDER_GRANT:g.ERROR,RESPONDER_RELEASE:g.NOT_RESPONDER,RESPONDER_TERMINATED:g.NOT_RESPONDER,ENTER_PRESS_RECT:g.RESPONDER_INACTIVE_PRESS_IN,LEAVE_PRESS_RECT:g.RESPONDER_INACTIVE_PRESS_OUT,LONG_PRESS_DETECTED:g.ERROR},RESPONDER_ACTIVE_PRESS_IN:{DELAY:g.ERROR,RESPONDER_GRANT:g.ERROR,RESPONDER_RELEASE:g.NOT_RESPONDER,RESPONDER_TERMINATED:g.NOT_RESPONDER,ENTER_PRESS_RECT:g.RESPONDER_ACTIVE_PRESS_IN,LEAVE_PRESS_RECT:g.RESPONDER_ACTIVE_PRESS_OUT,LONG_PRESS_DETECTED:g.RESPONDER_ACTIVE_LONG_PRESS_IN},RESPONDER_ACTIVE_PRESS_OUT:{DELAY:g.ERROR,RESPONDER_GRANT:g.ERROR,RESPONDER_RELEASE:g.NOT_RESPONDER,RESPONDER_TERMINATED:g.NOT_RESPONDER,ENTER_PRESS_RECT:g.RESPONDER_ACTIVE_PRESS_IN,LEAVE_PRESS_RECT:g.RESPONDER_ACTIVE_PRESS_OUT,LONG_PRESS_DETECTED:g.ERROR},RESPONDER_ACTIVE_LONG_PRESS_IN:{DELAY:g.ERROR,RESPONDER_GRANT:g.ERROR,RESPONDER_RELEASE:g.NOT_RESPONDER,RESPONDER_TERMINATED:g.NOT_RESPONDER,ENTER_PRESS_RECT:g.RESPONDER_ACTIVE_LONG_PRESS_IN,LEAVE_PRESS_RECT:g.RESPONDER_ACTIVE_LONG_PRESS_OUT,LONG_PRESS_DETECTED:g.RESPONDER_ACTIVE_LONG_PRESS_IN},RESPONDER_ACTIVE_LONG_PRESS_OUT:{DELAY:g.ERROR,RESPONDER_GRANT:g.ERROR,RESPONDER_RELEASE:g.NOT_RESPONDER,RESPONDER_TERMINATED:g.NOT_RESPONDER,ENTER_PRESS_RECT:g.RESPONDER_ACTIVE_LONG_PRESS_IN,LEAVE_PRESS_RECT:g.RESPONDER_ACTIVE_LONG_PRESS_OUT,LONG_PRESS_DETECTED:g.ERROR},error:{DELAY:g.NOT_RESPONDER,RESPONDER_GRANT:g.RESPONDER_INACTIVE_PRESS_IN,RESPONDER_RELEASE:g.NOT_RESPONDER,RESPONDER_TERMINATED:g.NOT_RESPONDER,ENTER_PRESS_RECT:g.NOT_RESPONDER,LEAVE_PRESS_RECT:g.NOT_RESPONDER,LONG_PRESS_DETECTED:g.NOT_RESPONDER}},D=10,C=0,I=200,A=function(e){function t(){c()(this,t);var e=f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.state={active:!1},e.onTouchStart=function(t){e.callChildEvent("onTouchStart",t),e.lockMouse=!0,e.releaseLockTimer&&clearTimeout(e.releaseLockTimer),e.touchableHandleResponderGrant(t.nativeEvent)},e.onTouchMove=function(t){e.callChildEvent("onTouchMove",t),e.touchableHandleResponderMove(t.nativeEvent)},e.onTouchEnd=function(t){e.callChildEvent("onTouchEnd",t),e.releaseLockTimer=setTimeout(function(){e.lockMouse=!1},300),e.touchableHandleResponderRelease(new N.a(t.nativeEvent))},e.onTouchCancel=function(t){e.callChildEvent("onTouchCancel",t),e.releaseLockTimer=setTimeout(function(){e.lockMouse=!1},300),e.touchableHandleResponderTerminate(t.nativeEvent)},e.onMouseDown=function(t){e.callChildEvent("onMouseDown",t),e.lockMouse||(e.touchableHandleResponderGrant(t.nativeEvent),document.addEventListener("mousemove",e.touchableHandleResponderMove,!1),document.addEventListener("mouseup",e.onMouseUp,!1))},e.onMouseUp=function(t){document.removeEventListener("mousemove",e.touchableHandleResponderMove,!1),document.removeEventListener("mouseup",e.onMouseUp,!1),e.touchableHandleResponderRelease(new N.a(t))},e.touchableHandleResponderMove=function(t){if(e.touchable.startMouse&&e.touchable.dimensionsOnActivate&&e.touchable.touchState!==g.NOT_RESPONDER&&e.touchable.touchState!==g.RESPONDER_INACTIVE_PRESS_IN){var a=l(t),n=a&&a.pageX,i=a&&a.pageY;if(e.pressInLocation){e._getDistanceBetweenPoints(n,i,e.pressInLocation.pageX,e.pressInLocation.pageY)>D&&e._cancelLongPressDelayTimeout()}if(e.checkTouchWithinActive(t)){e._receiveSignal(P.ENTER_PRESS_RECT,t);e.touchable.touchState===g.RESPONDER_INACTIVE_PRESS_IN&&e._cancelLongPressDelayTimeout()}else e._cancelLongPressDelayTimeout(),e._receiveSignal(P.LEAVE_PRESS_RECT,t)}},e}return R()(t,e),E()(t,[{key:"componentWillMount",value:function(){this.touchable={touchState:void 0}}},{key:"componentDidMount",value:function(){this.root=_.a.findDOMNode(this)}},{key:"componentDidUpdate",value:function(){this.root=_.a.findDOMNode(this),this.props.disabled&&this.state.active&&this.setState({active:!1})}},{key:"componentWillUnmount",value:function(){this.releaseLockTimer&&clearTimeout(this.releaseLockTimer),this.touchableDelayTimeout&&clearTimeout(this.touchableDelayTimeout),this.longPressDelayTimeout&&clearTimeout(this.longPressDelayTimeout),this.pressOutDelayTimeout&&clearTimeout(this.pressOutDelayTimeout)}},{key:"callChildEvent",value:function(e,t){var a=v.a.Children.only(this.props.children).props[e];a&&a(t)}},{key:"_remeasureMetricsOnInit",value:function(e){var t=this.root,a=l(e),n=t.getBoundingClientRect();this.touchable={touchState:this.touchable.touchState,startMouse:{pageX:a.pageX,pageY:a.pageY},positionOnGrant:{left:n.left+window.pageXOffset,top:n.top+window.pageYOffset,width:n.width,height:n.height,clientLeft:n.left,clientTop:n.top}}}},{key:"touchableHandleResponderGrant",value:function(e){var t=this;if(this.touchable.touchState=g.NOT_RESPONDER,this.pressOutDelayTimeout&&(clearTimeout(this.pressOutDelayTimeout),this.pressOutDelayTimeout=null),!this.props.fixClickPenetration||s()){this._remeasureMetricsOnInit(e),this._receiveSignal(P.RESPONDER_GRANT,e);var a=this.props,n=a.delayPressIn,i=a.delayLongPress;n?this.touchableDelayTimeout=setTimeout(function(){t._handleDelay(e)},n):this._handleDelay(e);var l=new N.a(e);this.longPressDelayTimeout=setTimeout(function(){t._handleLongDelay(l)},i+n)}}},{key:"checkScroll",value:function(e){var t=this.touchable.positionOnGrant,a=this.root.getBoundingClientRect();if(a.left!==t.clientLeft||a.top!==t.clientTop)return this._receiveSignal(P.RESPONDER_TERMINATED,e),!1}},{key:"touchableHandleResponderRelease",value:function(e){if(this.touchable.startMouse){var t=l(e);if(Math.abs(t.pageX-this.touchable.startMouse.pageX)>30||Math.abs(t.pageY-this.touchable.startMouse.pageY)>30)return void this._receiveSignal(P.RESPONDER_TERMINATED,e);!1!==this.checkScroll(e)&&this._receiveSignal(P.RESPONDER_RELEASE,e)}}},{key:"touchableHandleResponderTerminate",value:function(e){this.touchable.startMouse&&this._receiveSignal(P.RESPONDER_TERMINATED,e)}},{key:"checkTouchWithinActive",value:function(e){var t=this.touchable.positionOnGrant,a=this.props,n=a.pressRetentionOffset,i=void 0===n?{}:n,s=a.hitSlop,o=i.left,u=i.top,r=i.right,c=i.bottom;s&&(o+=s.left,u+=s.top,r+=s.right,c+=s.bottom);var d=l(e),E=d&&d.pageX,h=d&&d.pageY;return E>t.left-o&&h>t.top-u&&E<t.left+t.width+r&&h<t.top+t.height+c}},{key:"callProp",value:function(e,t){this.props[e]&&!this.props.disabled&&this.props[e](t)}},{key:"touchableHandleActivePressIn",value:function(e){this.setActive(!0),this.callProp("onPressIn",e)}},{key:"touchableHandleActivePressOut",value:function(e){this.setActive(!1),this.callProp("onPressOut",e)}},{key:"touchableHandlePress",value:function(e){Object(N.b)(e)&&this.callProp("onPress",e),C=Date.now()}},{key:"touchableHandleLongPress",value:function(e){Object(N.b)(e)&&this.callProp("onLongPress",e)}},{key:"setActive",value:function(e){(this.props.activeClassName||this.props.activeStyle)&&this.setState({active:e})}},{key:"_remeasureMetricsOnActivation",value:function(){this.touchable.dimensionsOnActivate=this.touchable.positionOnGrant}},{key:"_handleDelay",value:function(e){this.touchableDelayTimeout=null,this._receiveSignal(P.DELAY,e)}},{key:"_handleLongDelay",value:function(e){this.longPressDelayTimeout=null;var t=this.touchable.touchState;t!==g.RESPONDER_ACTIVE_PRESS_IN&&t!==g.RESPONDER_ACTIVE_LONG_PRESS_IN||this._receiveSignal(P.LONG_PRESS_DETECTED,e)}},{key:"_receiveSignal",value:function(e,t){var a=this.touchable.touchState,n=b[a]&&b[a][e];n&&n!==g.ERROR&&a!==n&&(this._performSideEffectsForTransition(a,n,e,t),this.touchable.touchState=n)}},{key:"_cancelLongPressDelayTimeout",value:function(){this.longPressDelayTimeout&&(clearTimeout(this.longPressDelayTimeout),this.longPressDelayTimeout=null)}},{key:"_isHighlight",value:function(e){return e===g.RESPONDER_ACTIVE_PRESS_IN||e===g.RESPONDER_ACTIVE_LONG_PRESS_IN}},{key:"_savePressInLocation",value:function(e){var t=l(e),a=t&&t.pageX,n=t&&t.pageY;this.pressInLocation={pageX:a,pageY:n}}},{key:"_getDistanceBetweenPoints",value:function(e,t,a,n){var i=e-a,l=t-n;return Math.sqrt(i*i+l*l)}},{key:"_performSideEffectsForTransition",value:function(e,t,a,n){var i=this._isHighlight(e),l=this._isHighlight(t);if((a===P.RESPONDER_TERMINATED||a===P.RESPONDER_RELEASE)&&this._cancelLongPressDelayTimeout(),!T[e]&&T[t]&&this._remeasureMetricsOnActivation(),O[e]&&a===P.LONG_PRESS_DETECTED&&this.touchableHandleLongPress(n),l&&!i?this._startHighlight(n):!l&&i&&this._endHighlight(n),O[e]&&a===P.RESPONDER_RELEASE){var s=!!this.props.onLongPress,o=y[e]&&(!s||!this.props.longPressCancelsPress);(!y[e]||o)&&(l||i||(this._startHighlight(n),this._endHighlight(n)),this.touchableHandlePress(n))}this.touchableDelayTimeout&&(clearTimeout(this.touchableDelayTimeout),this.touchableDelayTimeout=null)}},{key:"_startHighlight",value:function(e){this._savePressInLocation(e),this.touchableHandleActivePressIn(e)}},{key:"_endHighlight",value:function(e){var t=this;this.props.delayPressOut?this.pressOutDelayTimeout=setTimeout(function(){t.touchableHandleActivePressOut(e)},this.props.delayPressOut):this.touchableHandleActivePressOut(e)}},{key:"render",value:function(){var e=this.props,t=e.children,a=e.disabled,n=e.activeStyle,l=e.activeClassName,s=a?void 0:i(this,["onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","onMouseDown"]),o=v.a.Children.only(t);if(!a&&this.state.active){var r=o.props,c=r.style,d=r.className;return n&&(c=u()({},c,n)),l&&(d?d+=" "+l:d=l),v.a.cloneElement(o,u()({className:d,style:c},s))}return v.a.cloneElement(o,s)}}]),t}(v.a.Component);t.a=A,A.defaultProps={fixClickPenetration:!1,disabled:!1,delayPressIn:130,delayLongPress:370,delayPressOut:100,pressRetentionOffset:{left:20,right:20,top:20,bottom:20},hitSlop:void 0,longPressCancelsPress:!0}},473:function(e,t,a){"use strict";function n(e){var t=this;this.nativeEvent=e,["type","currentTarget","target","touches","changedTouches"].forEach(function(a){t[a]=e[a]}),e.$pressSeq?e.$pressSeq+=1:e.$pressSeq=1,this.$pressSeq=e.$pressSeq}function i(e){var t=e.nativeEvent,a=e.$pressSeq;return!t.$stopPressSeq||t.$stopPressSeq>=a}t.b=i;var l=a(3),s=a.n(l);n.prototype=s()({},n.prototype,{preventDefault:function(){this.nativeEvent.preventDefault()},stopPropagation:function(){var e=this.nativeEvent,t=this.$pressSeq;e.$stopPressSeq||(e.$stopPressSeq=t)}}),t.a=n},526:function(e,exports,t){"use strict";t(21),t(527)},527:function(e,exports){}},[337]);